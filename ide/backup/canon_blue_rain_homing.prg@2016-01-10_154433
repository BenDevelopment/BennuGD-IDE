process BlueRainCanon()
begin	
	WeaponFiringBehavior();	
	RondasMotherBaseCanon();
	loop
	
		if(CurrentWeapon != BLUE_RAIN)
			signal(id, S_KILL_TREE);
		end
	
		x = father.x + get_distx(j, i);
		y = father.y + get_disty(j, i);
		flags = father.flags;		
		i = flags == 0 ? 8 : -8;		
		j = flags == 0 ? father.angle + 15000 : -father.angle - 15000;		
		angle = flags == 0 ? father.angle + 90000 : -father.angle + 90000;				
	frame;	
	end
end

process BlueRainBaseCanon()
begin
	file = fpg_Town;
    ctype = c_scroll;
	cnumber = C_0;
	graph = 2;	
	z = father.z - 3;
	loop					
		x = father.father.x + get_distx(j, i);
		y = father.father.y + get_disty(j, i);
		flags = father.father.flags;		
		i = father.father.flags == 0 ? 8 : -8;		
		j = father.father.flags == 0 ? father.father.angle + 15000 : -father.father.angle - 15000;				
		angle = father.father.angle + 90000;
		
		if(firing_tick)
				
			if(father.father.flags == 0)
				Bullet(angle, x + get_distx(angle, 14), y + get_disty(angle, 14), z + 1, CurrentWeapon);
			else
				Bullet(-angle + 180000, x + get_distx(-angle, -14), y + get_disty(-angle, -14), z + 1, CurrentWeapon);
			end			
					
			shock_scroll(3, 0);
		end
		
	frame;			
	end
end
