process LittleRondaCanon()
begin	
	WeaponFiringBehavior();	
	LittleRondaBaseCanon();
	LittleRondaPistonCanon();
	LittleRondaRailCanon();	
	loop
		x = father.x + get_distx(j, i);
		y = father.y + get_disty(j, i);
		flags = father.flags;		
		i = flags == 0 ? 8 : -8;		
		j = flags == 0 ? father.angle + 15000 : -father.angle - 15000;		
		angle = flags == 0 ? father.angle + 90000 : -father.angle + 90000;				
	frame;	
	end
end

process LittleRondaBaseCanon()
begin
	file = fpg_Town;
    ctype = c_scroll;
	cnumber = C_0;
	graph = 2;	
	z = father.z - 3;
	loop			
		
		x = father.father.x + get_distx(j, i);
		y = father.father.y + get_disty(j, i);
		flags = father.father.flags;		
		i = father.father.flags == 0 ? 8 : -8;		
		j = father.father.flags == 0 ? father.father.angle + 15000 : -father.father.angle - 15000;				
		angle = father.father.angle + 90000;		
	frame;			
	end
end

process LittleRondaPistonCanon()
private
	int distanceMax, distance;
end
begin
	file = fpg_Town;
    ctype = c_scroll;
	cnumber = C_0;
	graph = 3;	
	z = father.z - 2;
	distanceMax = 27;
	resolution = 1;	
	loop				
			
		angle = father.father.angle + 90000;
		flags = father.father.flags;
	
		if(father.father.flags == 0)
			x = father.father.x + get_distx(father.father.angle + 90000, distance-10) + get_distx(father.father.angle + 15000, 8);
			y = father.father.y + get_disty(father.father.angle + 90000, distance-10) + get_disty(father.father.angle + 15000, 8);
		else
			x = father.father.x + get_distx(-father.father.angle - 90000, -distance+10) + get_distx(-father.father.angle - 15000, -8);
			y = father.father.y + get_disty(-father.father.angle - 90000, -distance+10) + get_disty(-father.father.angle - 15000, -8);	
		end		
		
		if(firing_tick)
		
			if(father.father.flags == 0)
				Bullet(angle, x + get_distx(angle, 14), y + get_disty(angle, 14), z + 1, CurrentWeapon);
			else
				Bullet(-angle + 180000, x + get_distx(-angle, -14), y + get_disty(-angle, -14), z + 1, CurrentWeapon);
			end			
					
			distance -= 10;
			shock_scroll(3, 0);
		end
		
		if(distance < 18) distance = 18; end
		if(distance < distanceMax) distance++; end
	frame;	
	end
end

process LittleRondaRailCanon()
private
	int distance;
end
begin
	file = fpg_Town;
    ctype = c_scroll;
	cnumber = C_0;
	graph = 4;	
	z = father.z - 1;
	distance = 18;
	loop		
		angle = father.father.angle + 90000;
		flags = father.father.flags;
	
		if(father.father.flags == 0)
			x = father.father.x + get_distx(father.father.angle + 90000, distance) + get_distx(father.father.angle + 15000, 8);
			y = father.father.y + get_disty(father.father.angle + 90000, distance) + get_disty(father.father.angle + 15000, 8);
		else
			x = father.father.x + get_distx(-father.father.angle - 90000, -distance) + get_distx(-father.father.angle - 15000, -8);
			y = father.father.y + get_disty(-father.father.angle - 90000, -distance) + get_disty(-father.father.angle - 15000, -8);	
		end		
	frame;	
	end
end